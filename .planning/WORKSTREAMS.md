# FlowFixer Hackathon — 3 Workstreams

## Workstream 1: Suggested Prompts

**Problem:** Students vibe-code, say "fix the bug," auto-accept, learn nothing.

**Solution:** When an error is detected, surface 2-3 context-aware prompts that guide them to *think* before accepting a fix. Socratic method, not spoon-feeding.

**Example** — for `TypeError: Cannot read property 'map' of undefined`:

- "What value does `data` have before the API call finishes?"
- "What happens when you call `.map()` on something that isn't an array?"
- "How can you give `useState` a safe starting value?"

**Where it lives:** In the Error Panel, above the explanation. Generated by Gemini alongside the existing `analyzeError()` call (add a `suggestedPrompts` field to the schema).

**Files:**

| File | Change |
|------|--------|
| `extension/src/llmClient.ts` | Add `suggestedPrompts` to Gemini schema and response parsing |
| `extension/src/types.ts` | Add `suggestedPrompts?: string[]` to `ErrorExplanation` interface |
| `extension/src/webview/error.html` | Render prompts section in Error Panel UI |
| `extension/src/panels/ErrorPanel.ts` | Pass prompts data through to webview |

**Dependencies:** None — fully independent from Workstream 2. Shares `error.html` with Workstream 3.

---

## Workstream 2: Inline "Explain" CodeLens

**Problem:** Everything is in sidebars. Student sees red squiggly but has to context-switch to understand it. ADHD-hostile.

**Solution:** Render a clickable "Explain this error" button directly above the error line in the editor using VS Code's CodeLens API.

**Example:**

```
  Explain this error | Fix it for me
  ─────────────────────────────────────
  const data = useState();
  //    ^^^^ TypeError: Cannot read property 'map' of undefined
```

**Where it lives:** New `CodeLensProvider` registered for JS/TS files. Listens to diagnostics, renders lens at error lines. Click triggers the existing `analyzeError` flow.

**Files:**

| File | Change |
|------|--------|
| `extension/src/codeLensProvider.ts` | **NEW** — CodeLensProvider class |
| `extension/src/extension.ts` | Register the provider on activation |
| `extension/package.json` | Add `codeLens` contribution point + activation events |

**Dependencies:** None — fully independent. Reuses existing `analyzeError` flow.

---

## Workstream 3: Error Panel Polish (Existing Feature)

**Problem:** The Error Panel is the first thing users see when an error fires, but it hasn't gotten the ADHD-friendly treatment. It's still a wall of text — long paragraphs, no progressive disclosure, no visual hierarchy matching the diff panel. The quiz exists but feels disconnected.

**Solution:** Apply the same redesign principles we shipped on the Diff Panel:

- Chunked sections with descriptive headings
- Progressive disclosure (`<details>/<summary>`) for longer content
- Plain language labels (6th-8th grade reading level)
- Consistent icon + heading pattern per section
- Better quiz interaction and visual feedback
- Skip link, ARIA landmarks, keyboard navigation
- `prefers-reduced-motion` support
- 36px+ touch targets

**Files:**

| File | Change |
|------|--------|
| `extension/src/webview/error.html` | Restructure HTML with progressive disclosure, ARIA, skip links |
| `extension/src/webview/styles.css` | Add/update styles (reuse `ff-disclosure`, `ff-section` patterns) |
| `extension/src/panels/ErrorPanel.ts` | Update message passing if section structure changes |

**Dependencies:** Shares `error.html` with Workstream 1. Coordinate on the prompts section placement.

---

## Coordination Notes

- **Workstream 2 is fully independent** — can be done by anyone without blocking.
- **Workstreams 1 & 3 both touch `error.html`** — either assign to the same person, or have Workstream 3 go first (structure), then Workstream 1 adds the prompts section into the new structure.
- **Recommended order if sequential:** 3 → 1 → 2 (or 2 in parallel with 3 → 1).

## Summary

| # | Workstream | Type | Key Deliverable | Owner |
|---|-----------|------|-----------------|-------|
| 1 | Suggested Prompts | New feature | Contextual learning prompts in Error Panel | TBD |
| 2 | Inline CodeLens | New feature | "Explain" button at error line in editor | TBD |
| 3 | Error Panel Polish | Existing feature | ADHD-friendly redesign matching Diff Panel | TBD |
